
```javascript

	// 返回指定范围的随机数(m-n之间)的公式

	function getRandomNumber(m, n) {
		return Math.random() * (n - m) + m;
	}

	console.log("随机数[20-30]:", getRandomNumber(20, 30));

	console.log("整数随机数[20-30]:", Math.floor(getRandomNumber(20, 30)));


	// iOS，Safari浏览器，input等表单focus后fixed元素错位问题

	function adjustInputPositon() {
		if (/iPhone|iPod|iPad/i.test(navigator.userAgent)) {
			$(document).on('focus', 'input, textarea', function() {
				$('header').css("position", 'absolute');
				$('footer').css("position", 'absolute');

			});

			$(document).on('blur', 'input, textarea', function() {
				$('header').css("position", 'fixed');
				$('footer').css("position", 'fixed');

			});
		}
	}

	// 得到地理位置

	function getLocation(callback) {
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(
				function(p) {
					callback(p.coords.latitude, p.coords.longitude);
				},
				function(e) {
					var msg = e.code + "\n" + e.message;
				}
			);
		}
	}

	// 字符串长度截取

	function cutstr(str, len) {
		var temp,
			icount = 0,
			patrn = /[^\x00-\xff]/,
			strre = "";
		for (var i = 0; i < str.length; i++) {
			if (icount < len - 1) {
				temp = str.substr(i, 1);
				if (patrn.exec(temp) == null) {
					icount = icount + 1
				} else {
					icount = icount + 2
				}
				strre += temp
			} else {
				break;
			}
		}
		return strre + "..."
	}

	console.log(cutstr("abcdefghijklmnopqrstuvwxyz", 15));

	// 字符串替换全部 str:目标字符串 s1：被替换的字符串 s2：替换的字符串

	function strReplaceAll(str, s1, s2) {
		var myReg = new RegExp(s1, "gm");
		return str.replace(myReg, s2);
	}

	console.log(strReplaceAll("abcdefghijkl,abcmnopqrs,abctuvwxyz", "abc", "fff"));

	// 字符串清除空格 str:目标字符串 type:清楚类型 a代表all清除两边空格 l代表left清除左边空格 r代表right清楚右边空格

	function strTrim(str, type) {
		if (type == "l") {
			return str.replace(/^(\s*|　*)/, "");
		} else if (type == "r") {
			return str.replace(/(\s*|　*)$/, "");
		} else {
			return str.replace(/^\s*(.*?)\s+$/, "$1");
		}
	}

	var trimStr = "   Hello World !   ";
	console.log(strTrim(trimStr, "l"));
	console.log(strTrim(trimStr, "r"));
	console.log(strTrim(trimStr, "a"));

	// 判断是否以某个字符串开头

	String.prototype.startWith = function(s) {
		return this.indexOf(s) == 0;
	}

	console.log("abc".startWith("ab"));

	// 判断是否以某个字符串结束

	String.prototype.endWith = function(s) {
		var d = this.length - s.length;
		return (d >= 0 && this.lastIndexOf(s) == d);
	}

	console.log("abc".endWith("bc"));

	// 转义html标签

	function HtmlEncode(text) {
		return text.replace(/&/g, '&').replace(/\"/g, '"').replace(/</g, '<').replace(/>/g, '>')
	}

	// 时间日期格式转换 方法一

	Date.prototype.Format = function(formatStr) {
		var str = formatStr;
		var Week = ['日', '一', '二', '三', '四', '五', '六'];
		str = str.replace(/yyyy|YYYY/, this.getFullYear());
		str = str.replace(/yy|YY/, (this.getYear() % 100) > 9 ? (this.getYear() % 100).toString() : '0' + (this.getYear() % 100));
		str = str.replace(/MM/, (this.getMonth() + 1) > 9 ? (this.getMonth() + 1).toString() : '0' + (this.getMonth() + 1));
		str = str.replace(/M/g, (this.getMonth() + 1));
		str = str.replace(/w|W/g, Week[this.getDay()]);
		str = str.replace(/dd|DD/, this.getDate() > 9 ? this.getDate().toString() : '0' + this.getDate());
		str = str.replace(/d|D/g, this.getDate());
		str = str.replace(/hh|HH/, this.getHours() > 9 ? this.getHours().toString() : '0' + this.getHours());
		str = str.replace(/h|H/g, this.getHours());
		str = str.replace(/mm/, this.getMinutes() > 9 ? this.getMinutes().toString() : '0' + this.getMinutes());
		str = str.replace(/m/g, this.getMinutes());
		str = str.replace(/ss|SS/, this.getSeconds() > 9 ? this.getSeconds().toString() : '0' + this.getSeconds());
		str = str.replace(/s|S/g, this.getSeconds());
		return str
	}

	// ("00" + (d.getUTCMonth() + 1)).slice(-2) 取两位数

	var myDate = new Date();
	console.log(myDate.Format("yyyy年MM月dd日"));

	// 时间日期格式转换 方法二

	Date.prototype.format = function(format) {
		var o = {
			"M+": this.getMonth() + 1, //month
			"d+": this.getDate(), //day
			"h+": this.getHours(), //hour
			"m+": this.getMinutes(), //minute
			"s+": this.getSeconds(), //second
			"q+": Math.floor((this.getMonth() + 3) / 3), //quarter
			"S": this.getMilliseconds() //millisecond
		};
		if (/(y+)/.test(format)) format = format.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
		for (var k in o) {
			if (new RegExp("(" + k + ")").test(format))
				format = format.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : ("00" + o[k]).substr(("" + o[k]).length));
		}
		return format;
	}

	//调用
	//new Date().format("yyyy-MM-dd hh:mm:ss");


	// 判断是否为数字类型

	function isDigit(value) {
		var patrn = /^[0-9]*$/;
		if (patrn.exec(value) == null || value == "") {
			return false
		} else {
			return true
		}
	}

	// 获取cookie值

	function getCookie(name) {
		var arr = document.cookie.match(new RegExp("(^| )" + name + "=([^;]*)(;|$)"));
		if (arr != null) return unescape(arr[2]);
		return null
	}

	// 设置cookie值

	function setCookie(name, value, Hours) {
		var d = new Date();
		var offset = 8;
		var utc = d.getTime() + (d.getTimezoneOffset() * 60000);
		var nd = utc + (3600000 * offset);
		var exp = new Date(nd);
		exp.setTime(exp.getTime() + Hours * 60 * 60 * 1000);
		document.cookie = name + "=" + escape(value) + ";path=/;expires=" + exp.toGMTString() + ";domain=www.baidu.com;"
	}

	// 加载样式文件表

	function LoadStyle(url) {
		try {
			document.createStyleSheet(url)
		} catch (e) {
			var cssLink = document.createElement('link');
			cssLink.rel = 'stylesheet';
			cssLink.type = 'text/css';
			cssLink.href = url;
			var head = document.getElementsByTagName('head')[0];
			head.appendChild(cssLink)
		}
	}


	// 动态加载脚本文件

	function appendscript(src, text, reload, charset) {
		var id = hash(src + text);
		if (!reload && in_array(id, evalscripts)) return;
		if (reload && $(id)) {
			$(id).parentNode.removeChild($(id));
		}

		evalscripts.push(id);
		var scriptNode = document.createElement("script");
		scriptNode.type = "text/javascript";
		scriptNode.id = id;
		scriptNode.charset = charset ? charset : (BROWSER.firefox ? document.characterSet : document.charset);
		try {
			if (src) {
				scriptNode.src = src;
				scriptNode.onloadDone = false;
				scriptNode.onload = function() {
					scriptNode.onloadDone = true;
					JSLOADED[src] = 1;
				};
				scriptNode.onreadystatechange = function() {
					if ((scriptNode.readyState == 'loaded' || scriptNode.readyState == 'complete') && !scriptNode.onloadDone) {
						scriptNode.onloadDone = true;
						JSLOADED[src] = 1;
					}
				};
			} else if (text) {
				scriptNode.text = text;
			}
			document.getElementsByTagName('head')[0].appendChild(scriptNode);
		} catch (e) {}
	}
	// 检验URL链接是否有效

	function getUrlState(URL) {
		var xmlhttp = new ActiveXObject("microsoft.xmlhttp");
		xmlhttp.Open("GET", URL, false);
		try {
			xmlhttp.Send();
		} catch (e) {} finally {
			var result = xmlhttp.responseText;
			if (result) {
				if (xmlhttp.Status == 200) {
					return (true);
				} else {
					return (false);
				}
			} else {
				return (false);
			}
		}
	}

	// 获取页面高度

	function getPageHeight() {
		var g = document,
			a = g.body,
			f = g.documentElement,
			d = g.compatMode == "BackCompat" ? a : g.documentElement;
		return Math.max(f.scrollHeight, a.scrollHeight, d.clientHeight);
	}

	// 获取页面可视宽度

	function getPageViewWidth() {
		var d = document,
			a = d.compatMode == "BackCompat" ?
			d.body : d.documentElement;
		return a.clientWidth;
	}

	// 获取页面宽度
	function getPageWidth() {
		var g = document,
			a = g.body,
			f = g.documentElement,
			d = g.compatMode == "BackCompat" ?
			a : g.documentElement;
		return Math.max(f.scrollWidth, a.scrollWidth, d.clientWidth);
	}

	// 返回顶部的通用方法

	function backTop(btnId) {
		var btn = document.getElementById(btnId);
		var d = document.documentElement;
		var b = document.body;
		window.onscroll = set;
		btn.style.display = "none";
		btn.onclick = function() {
			btn.style.display = "none";
			window.onscroll = null;
			this.timer = setInterval(function() {
				d.scrollTop -= Math.ceil((d.scrollTop + b.scrollTop) * 0.1);
				b.scrollTop -= Math.ceil((d.scrollTop + b.scrollTop) * 0.1);
				if ((d.scrollTop + b.scrollTop) == 0) clearInterval(btn.timer, window.onscroll = set);
			}, 10);
		};

		function set() {
			btn.style.display = (d.scrollTop + b.scrollTop > 100) ? 'block' : "none"
		}
	};
	// backTop('goTop');


	// 获得URL中GET参数值
	// 用法：如果地址是 test.htm?t1=1&t2=2&t3=3, 那么能取得：GET["t1"], GET["t2"], GET["t3"]

	function get_get() {
		querystr = window.location.href.split("?")
		if (querystr[1]) {
			GETs = querystr[1].split("&");
			GET = [];
			for (i = 0; i < GETs.length; i++) {
				tmp_arr = GETs.split("=")
				key = tmp_arr[0]
				GET[key] = tmp_arr[1]
			}
		}
		return querystr[1];
	}

	// 数组去重

	String.prototype.unique = function() {
		var x = this.split(/[\r\n]+/);
		var y = '';
		for (var i = 0; i < x.length; i++) {
			if (!new RegExp("^" + x.replace(/([^\w])/ig, "\\$1") + "$", "igm").test(y)) {
				y += x + "\r\n"
			}
		}
		return y
	};

	// 字符串反序输出

	function IsReverse(text) {
		return text.split('').reverse().join('');
	}


```
